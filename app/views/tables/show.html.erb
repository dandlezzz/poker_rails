
<div class="table">
  <% @table.players.sort.each_with_index do |player, index| %>
    <div class="boxed" id="player<%=index+1%>">
      <%= player.name %>
      <p><%= player.chips %>
      <div id="button"><% if player.seat == @table.button %>
        <%= image_tag "button.jpg", :size => "25x25" %>
      <% end %></div></p>
      <% if player.cards.count > 0 %>
        <% player.cards.each do |card| %>
          <%= image_tag card.pic, :size => "50x70" %>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <div class="board">
    <% if @table.cards.count == 3 %>
      <% @table.cards.each_with_index do |card, index| %>
        <div id="board<%=index+1%>">
          <%= image_tag card.pic%>
        </div>
      <% end %>
    <% elsif @table.cards.count == 4 %>
      <% @table.cards.each_with_index do |card, index| %>
        <div id="board<%=index+1%>">
          <%= image_tag card.pic %>
        </div>
      <% end %>
     <% elsif @table.cards.count == 5 %>
      <% @table.cards.each_with_index do |card, index| %>
        <div id="board<%=index+1%>">
          <%= image_tag card.pic %>
        </div>
      <% end %>
    <% end %>
  </div>

  <div id="state">
    <p> Bet: <%= @table.bet %></p>
    <p> Pot: <%= @table.pot %> </p>
  </div>

  <div id="blinds">
    <p> Big Blind: <%= @table.bb %></p>
    <p> Small Blind: <%= @table.sb %></p>
  </div>

</div>

<%= button_to "Deal 'em", table_path(@table.id, preflop: :true), method: :patch %>
<%= button_to "Flop", table_path(@table.id, flop: :true), method: :patch %>
<%= button_to "Turn", table_path(@table.id, turn: :true), method: :patch %>
<%= button_to "River", table_path(@table.id, river: :true), method: :patch %>
<%= button_to "New Hand", table_path(@table.id, new_hand: :true), method: :patch %>

