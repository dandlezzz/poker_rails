
<div class="table">
  <% @table.players.sort.each_with_index do |player, index| %>
    <div class="boxed" id="player<%=index+1%>">
      <%= player.name %>
      <% if player.hand != ''%>
        <p><%= player.hand %></p>
      <% else %>
        <p><%= player.chips %></p>
      <% end %>
      <div id="button"><% if player.seat == @table.button %>
        <%= image_tag "button.jpg", :size => "30x30" %>
      <% end %></div></p>
      <% if player.cards.count > 0 %>
        <% player.cards.each do |card| %>
          <%= image_tag card.pic, :size => "50x70" %>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <%= render "board" %>

  <div id="state">
    Bet: <%= @table.bet %> <br>
    Pot: <%= @table.pot %>
  </div>

  <div id="blinds">
    <p> Big Blind: <%= @table.bb %></p>
    <p> Small Blind: <%= @table.sb %></p>
  </div>

</div>

<%= button_to "Deal 'em", table_path(@table.id, preflop: :true), method: :patch %>
<%= button_to "Flop", table_path(@table.id, flop: :true), method: :patch %>
<%= button_to "Turn", table_path(@table.id, turn: :true), method: :patch %>
<%= button_to "River", table_path(@table.id, river: :true), method: :patch %>
<%= button_to "New Hand", table_path(@table.id, new_hand: :true), method: :patch %>
<%= button_to "Showdown", table_path(@table.id, showdown: :true), method: :patch %>

